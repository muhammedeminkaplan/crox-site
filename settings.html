<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crox | Ayarlar & Giri≈üler</title>
    <style>
        /* Ana Tasarƒ±m Ayarlarƒ± */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: #f8f9fc; display: flex; min-height: 100vh; }
        
        /* Sidebar - Men√º */
        .sidebar { width: 260px; background: #fff; height: 100vh; border-right: 1px solid #e0e0e0; padding: 30px 20px; position: fixed; }
        .logo { font-size: 24px; font-weight: 800; color: #6c5ce7; text-decoration: none; display: block; margin-bottom: 40px; }
        .nav-item { padding: 12px 15px; color: #555; text-decoration: none; display: flex; align-items: center; gap: 10px; border-radius: 10px; margin-bottom: 5px; transition: 0.3s; }
        .nav-item:hover { background: #f8f9fc; color: #6c5ce7; }
        .nav-item.active { background: #f1f0ff; color: #6c5ce7; font-weight: bold; }

        /* ƒ∞√ßerik Alanƒ± */
        .main-content { margin-left: 260px; flex: 1; padding: 40px; }
        .settings-card { background: white; padding: 35px; border-radius: 20px; box-shadow: 0 4px 25px rgba(0,0,0,0.05); max-width: 900px; margin: 0 auto; }
        
        .section-title { margin-bottom: 25px; padding-bottom: 10px; border-bottom: 1px solid #f1f1f1; display: flex; justify-content: space-between; align-items: center; }
        .section-title h2 { font-size: 20px; color: #333; }

        /* Form Yapƒ±sƒ± */
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .form-group { display: flex; flex-direction: column; gap: 8px; }
        label { font-size: 13px; font-weight: 600; color: #666; }
        input, select { padding: 12px; border: 1px solid #e0e0e0; border-radius: 10px; outline: none; transition: 0.3s; font-size: 14px; }
        input:focus { border-color: #6c5ce7; box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1); }
        
        .btn-save { background: #6c5ce7; color: white; border: none; padding: 14px 28px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-save:hover { background: #5649c1; transform: translateY(-1px); }

        /* Giri≈ü Kayƒ±tlarƒ± Tablosu */
        .log-table-wrapper { margin-top: 40px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; background: #fafafa; border-radius: 12px; overflow: hidden; }
        th { text-align: left; padding: 15px; font-size: 13px; color: #888; border-bottom: 1px solid #eee; }
        td { padding: 15px; font-size: 14px; color: #444; border-bottom: 1px solid #eee; }
        .ip-badge { background: #2d3436; color: #00cec9; padding: 4px 8px; border-radius: 6px; font-family: monospace; font-size: 12px; }
        .status-active { color: #2ecc71; font-weight: bold; display: flex; align-items: center; gap: 5px; }

        /* Mobil Uyumluluk */
        @media (max-width: 768px) {
            body { flex-direction: column; }
            .sidebar { width: 100%; height: auto; position: relative; padding: 20px; border-right: none; border-bottom: 1px solid #eee; }
            .main-content { margin-left: 0; padding: 20px; }
            .form-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <a href="dashboard.html" class="logo">CROX</a>
        <a href="dashboard.html" class="nav-item">üè† Dashboard</a>
        <a href="orders.html" class="nav-item">üí∞ Sipari≈üler</a>
        <a href="settings.html" class="nav-item active">‚öôÔ∏è Ayarlar</a>
        <a href="logs.html" class="nav-item">üîë Giri≈üler</a>
    </div>

    <div class="main-content">
        <div class="settings-card">
            <div class="section-title">
                <h2>Maƒüaza Ayarlarƒ±</h2>
                <span style="font-size: 11px; color: #aaa;">T√ºm deƒüi≈üiklikler yerel olarak saklanƒ±r.</span>
            </div>
            
            <form id="settingsForm">
                <div class="form-grid">
                    <div class="form-group"><label>Maƒüaza Adƒ±</label><input type="text" id="storeName" placeholder="√ñrn: Ronaldo"></div>
                    <div class="form-group"><label>E-posta Adresi</label><input type="email" id="storeEmail" placeholder="ronaldo@gmail.com"></div>
                    <div class="form-group">
                        <label>Para Birimi</label>
                        <select id="currency">
                            <option value="TL">T√ºrk Lirasƒ± (‚Ç∫)</option>
                            <option value="USD">Dolar ($)</option>
                        </select>
                    </div>
                    <div class="form-group"><label>Telefon</label><input type="text" id="storePhone" placeholder="23232323232"></div>
                </div>

                <div class="section-title" style="margin-top: 30px;"><h2>√ñdeme ve IBAN</h2></div>
                <div style="background: #f1f0ff; padding: 12px; border-radius: 8px; margin-bottom: 15px; font-size: 13px; color: #6c5ce7;">
                    üí° √ñdemeleriniz her Cuma g√ºn√º belirttiƒüiniz IBAN adresine g√∂nderilir.
                </div>
                <div class="form-group" style="margin-bottom: 20px;">
                    <label>IBAN Adresi</label>
                    <input type="text" id="storeIban" placeholder="TR00 0000 0000 0000 0000 0000 00">
                </div>

                <button type="submit" class="btn-save">Deƒüi≈üiklikleri Kaydet</button>
            </form>

            <div class="log-table-wrapper">
                <div class="section-title">
                    <h2>Hesap Eri≈üim Kayƒ±tlarƒ±</h2>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Tarih / Saat</th>
                            <th>IP Adresi</th>
                            <th>Konum</th>
                            <th>Durum</th>
                        </tr>
                    </thead>
                    <tbody id="accessLogs">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // 1. Ayarlarƒ± Kaydetme ve Y√ºkleme ƒ∞≈ülemi
        const form = document.getElementById('settingsForm');
        
        window.onload = () => {
            const savedData = JSON.parse(localStorage.getItem('croxSettings')) || {};
            document.getElementById('storeName').value = savedData.storeName || '';
            document.getElementById('storeEmail').value = savedData.storeEmail || '';
            document.getElementById('currency').value = savedData.currency || 'TL';
            document.getElementById('storePhone').value = savedData.storePhone || '';
            document.getElementById('storeIban').value = savedData.storeIban || '';
            
            updateAccessLogs(); // IP kayƒ±tlarƒ±nƒ± getir
        };

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const data = {
                storeName: document.getElementById('storeName').value,
                storeEmail: document.getElementById('storeEmail').value,
                currency: document.getElementById('currency').value,
                storePhone: document.getElementById('storePhone').value,
                storeIban: document.getElementById('storeIban').value
            };
            localStorage.setItem('croxSettings', JSON.stringify(data));
            alert("Ayarlar ba≈üarƒ±yla kaydedildi!");
        });

        // 2. Ger√ßek IP Takip Sistemi
        async function updateAccessLogs() {
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                const now = new Date().toLocaleString('tr-TR');
                
                const logTable = document.getElementById('accessLogs');
                
                logTable.innerHTML = `
                    <tr>
                        <td>${now}</td>
                        <td><span class="ip-badge">${data.ip}</span></td>
                        <td>${data.city}, ${data.country_name}</td>
                        <td><span class="status-active">‚óè Aktif Oturum</span></td>
                    </tr>
                    <tr style="opacity: 0.5;">
                        <td>23.12.2025 18:42</td>
                        <td><span class="ip-badge">176.234.12.91</span></td>
                        <td>Ankara, TR</td>
                        <td>Tamamlandƒ±</td>
                    </tr>
                `;
            } catch (error) {
                document.getElementById('accessLogs').innerHTML = "<tr><td colspan='4'>IP verisi alƒ±namadƒ± (Reklam engelleyiciyi kapatƒ±n).</td></tr>";
            }
        }
    </script>
</body>
</html>